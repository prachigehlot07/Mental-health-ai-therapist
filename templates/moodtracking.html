<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mood Tracker</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='moodtracking.css') }}">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

</head>

<body>
    <a href="{{ url_for('homepage') }}" style="
        display: inline-block;
        margin-bottom: 20px;
        background: #f8b7d2;
        color: #fff;
        padding: 8px 16px;
        border-radius: 8px;
        text-decoration: none;
        font-weight: bold;
        transition: background 0.3s ease;
    ">← Back to Homepage</a>

    <div class="container">
        <h1>Calendar Mood Tracker</h1>
        <h2 id="monthYear"></h2>
        <div class="calendar" id="calendar"></div>
        <h3 style="margin-top: 30px;">Mood Frequency This Month</h3>
        <canvas id="moodChart" width="400" height="200"></canvas>
        <div class="analysis-section">
            <h3>This Month's Mood Analysis</h3>
            {% if mood_percentages %}
            <ul>
                {% for mood, percent in mood_percentages.items() %}
                <li>{{ mood }} – {{ percent }}%</li>
                {% endfor %}
            </ul>
            {% else %}
            <p>No mood data for this month yet.</p>
            {% endif %}
        </div>
 <h3 style="margin-top: 50px;">Last Month's Mood Progress</h3>
    <canvas id="prevMonthChart" width="400" height="200"></canvas>



    </div>
    <div class="mood-popup" id="moodPopup">
        <h3>How are you feeling today?</h3>
        <select id="moodSelect">
            <option value="😊 Happy">😊 Happy</option>
            <option value="😢 Sad">😢 Sad</option>
            <option value="😴 Tired">😴 Tired</option>
            <option value="🤩 Excited">🤩 Excited</option>
            <option value="😟 Stressed">😟 Stressed</option>
            <option value="😡 Angry">😡 Angry</option>
            <option value="🙄 Annoyed">🙄 Annoyed</option>
        </select>
        <button onclick="saveMood()">Save</button>
    </div>

   



    <script src="{{ url_for('static', filename='script.js') }}"></script>
<canvas id="prevMonthChart" width="400" height="200"></canvas>

<script>
    const prevLabels = {{ prev_labels | tojson | safe }};
    const prevScores = {{ prev_scores | tojson | safe }};

    const prevCtx = document.getElementById('prevMonthChart').getContext('2d');

    const prevChart = new Chart(prevCtx, {
        type: 'line',
        data: {
            labels: prevLabels,
            datasets: [{
                label: 'Previous Month Mood Progress',
                data: prevScores,
                fill: false,
                borderColor: '#ff5e9c',
                tension: 0.2,
                pointBackgroundColor: "#ffb6d9"
            }]
        },
        options: {
            scales: {
                y: {
                    min: 1,
                    max: 5,
                    title: {
                        display: true,
                        text: 'Mood Score'
                    },
                    ticks: {
                        callback: function (val) {
                            const moodMap = ["😡", "😟", "😴", "😊", "🤩"];
                            return moodMap[val - 1] || val;
                        }
                    }
                }
            }
        }
    });
</script>



</body>

</html>